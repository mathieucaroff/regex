<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, usem-scalable=no" />

  <title>Regular Expression training course</title>

  <link rel="stylesheet" href="node_modules/reveal.js/dist/reset.css" />
  <link rel="stylesheet" href="node_modules/reveal.js/dist/reveal.css" />
  <link rel="stylesheet" href="node_modules/reveal.js/dist/theme/black.css" />
  <link rel="stylesheet" href="node_modules/reveal.js/plugin/highlight/monokai.css" />
  <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css" />
</head>

<body>
  <script>
    class MComponent extends HTMLSpanElement { }
    customElements.define("m-", MComponent, { extends: "span" });
    class CopyComponent extends HTMLSpanElement { }
    customElements.define("copy-", CopyComponent, { extends: "span" });
  </script>

  <div class="reveal">
    <div class="slides">
      <section>
        <h1>Formation aux expressions régulières</h1>
        <em fragment>/Reg[Ee]xp?/ training course</em>
        <aside>
          Cette présentation des expressions régulières s'interessera aux
          fonctionnalités les plus utiles des regexs et à leur utilisation
          en pratique. On évitera donc les sujets les plus avancés et beaucoups
          de fonctionnalités peu utiles.
        </aside>
      </section>
      <section>
        <h2>Sommaire</h2>

        <ul class="fs-2 table-of-contents" data-unfold-content="Introduction">
          <li>
            Introduction
            <ul>
              <li>Exemple de Regex</li>
              <li>Utilisation des regexs dans l'IDE</li>
            </ul>
          </li>
          <li>
            Fonctionnement et syntaxes des regexs
            <ol>
              <li>Texte</li>
              <li>Alternatives</li>
              <li>Groupes</li>
              <li>Quantificateurs</li>
              <li>Classes de caractères</li>
              <li>Quantificateurs spécifiques</li>
              <li>Ancres</li>
              <li>Échapements</li>
            </ol>
          </li>
          <li>Remplacements</li>
          <li>Cas habituels</li>
          <li>Exercices</li>
          <li>
            Les Regexs hors de l'IDE
            <ul>
              <li>en ligne de commande</li>
              <li>en JS</li>
              <li>en Python</li>
            </ul>
          </li>
          <li>Culture, théorie et moteurs de regexs</li>
          <li>Autres ressources</li>
        </ul>
      </section>

      <section>
        <h1>Introduction</h1>
      </section>
      <section>
        <h2>Les expressions régulières c'est quoi ?</h2>
        <h2 fragment>À quoi ça sert?</h2>
        <div fragment class="decoration-right-rotated">
          <code><pre>grep -E 'useState\((true|false)\)' -R src | sort | uniq -c</pre></code>
        </div>
        <div fragment class="decoration-left-rotated">
          <code>s/(myAuthSecrets?)(-+[Pp]ages?)?/$1/g</code>
        </div>
        <img fragment src="img/ant-renamer-regex-substitution.png" />
        <aside>
          Les regexs sont un outils de recherche et de remplacement de motifs
          de caractères dans des données textuelles. Ces motifs sont décrits
          par un langage spécifique à un domain, ou DSL, Domain Specifique
          Language : le DSL des expressions régulières. || Les regexs peuvent
          servir à toutes sorte de choses. Par exemple: || Trouver des données
          spécifiques dans les logs grâce à des motifs plus complexe que la
          recherche lettre pour lettre. || Faire des statistiques sur l'utilisation de
          fonctions dans le code.|| Le renommage de plusieurs variables
          simultanement. || Le rennomage de fichier. Valider qu'un email ou un
          numéro de téléphone entré par l'utilisateur ne comporte pas d'erreur
          de format.
        </aside>
      </section>
      <section>
        <h2>Exemple de regex</h2>
        <a href="https://regex101.com/?regex=^ *(\+33|0)( ?[0-9]){7} *$"><code>/^ *(\+33|0)( ?[0-9]){7} *$/</code></a>
        <aside>
          Voici une expression régulière qui match uniquement les numéros de téléphone.
        </aside>
      </section>
      <section>
        <section>
          <h2>Utiliser les regexs dans l'IDE</h2>
          <div class="r-stack fs-2">
            <div class="fade-out" data-fragment-index="1">
              <div>
                <img src="./img/vscode-regex-search.png" alt="Using regex search in VSCode" />
              </div>
              <em>Regex dans VSCode</em> - <code>Alt+R</code>
            </div>
            <div class="fade-in" data-fragment-index="1">
              <div>
                <a href="https://stackoverflow.com/q/3760444"><img src="./img/vim-regex-search.png"
                    alt="Using regex search in Vim" height="200" /></a>
              </div>
              <em>Regex dans Vim</em> - <code>/\v</code> (<code>:nnoremap / /\v</code>)
            </div>
          </div>
          <aside>
            Pour utiliser les expressions régulière dans votre IDE favori, il
            y a le raccourci clavier Alt+R pour VSCode. Pour Vim, il faut
            activer le mode very magic avec `\v` pour avoir des Regex
            traditionelles. Pour les autres éditeurs de text et IDE, c'est
            souvent une checkbox à cocher.
          </aside>
        </section>
      </section>

      <section>
        <h1 syntaxe>Fonctionnement et syntaxes des regexs</h1>
      </section>
      <section>
        <h2><copy- from="[syntaxe]" /></h2>
        <ul class="fs-2 table-of-contents" data-unfold-content="Fonctionnement et syntaxes des regexs"></ul>
      </section>
      <section>
        <section>
          <h2 matcher>Matcher du text, caractère pour caractère</h2>

          <ul class="fs-1">
            <li>Les lettres (<code>A-Za-z</code>)</li>
            <li>Les nombres (<code>0-9</code>)</li>
            <li>Les blancs<ul>
                <li>Espaces</li>
                <li>Tabulations</li>
                <li>Retours à la ligne</li>
              </ul>
            </li>
            <li>
              La majorité des ponctuations (17 / 31)
            </li>
          </ul>
        </section>
        <section>
          <h2><copy- from="[matcher]" /></h2>
          <h4>Exemples</h4>
          <ul class="fs-1">
            <li fragment>"Foo" <code fragment>/Foo/</code></li>
            <li fragment>"H3110" <code fragment>/H3110/</code></li>
            <li fragment>"a, b" <code fragment>/a, b/</code></li>
          </ul>
        </section>
      </section>
      <section>
        <h2>Groupes</h2>
        <code>(...)</code>
        <h4 padding fragment>Exemples</h4>
        <ul>
          <li fragment><code>(Foo)</code><span fragment> → "Foo"</span></li>
          <li fragment><code>(F)(o)(o)</code><span fragment> → "Foo"</span></li>
          <li fragment><code>((((Foo))))</code><span fragment> → "Foo"</span></li>
          <li fragment><code>((((F))((o)o)))</code><span fragment> → "Foo"</span></li>
          <li fragment><code>((((Foo))</code><span fragment>❌</span></li>
          <li fragment><code>)Foo(</code><span fragment>❌</span></li>
          <li fragment><code>((Foo))))</code><span fragment>❌</span></li>
        </ul>
        <aside>
          Placer un morceau d'expression régulière entre deux parenthèses crée un groupe.
        </aside>
      </section>
      <section>
        <h2>Alternatives</h2>
        <code>a|b</code>
        <h4 padding fragment>Exemples</h4>
        <ul>
          <li fragment><code>Tooltip|Popover</code></li>
          <li fragment><code>un pain au chocolat|une chocolatine</code></li>
          <li fragment>
            <code>(Date|Time|DateTime)Picker</code>
            <ul>
              <li fragment><code>DatePicker|TimePicker|DateTimePicker</code></li>
            </ul>
          </li>
          <li fragment>
            <code>(jp(e|)|pn)g|bmp|gif</code>
            <ul>
              <li fragment><code>jpeg|jpg|png|bmp|gif</code></li>
            </ul>
          </li>
          <li fragment>
            <code>(|_)(a|b)(x|y|z)</code>
            <ul>
              <li fragment><code>ax|ay|az|bx|by|bz|_ax|_ay|_az|_bx|_by|_bz</code></li>
            </ul>
          </li>
        </ul>
        <aside>
          Le symbole "bar verticale" `|` permet de définir plusieurs alternatives
          que le moteur d'expression régulière essaira de matcher dans l'ordre.
          Il est possible limiter différentes alternatives en les placer entre
          parenthèses.
        </aside>
      </section>
      <section>
        <section>
          <h2>Quantificateurs</h2>
          <em>Répétitions de motifs</em>
          <table>
            <thead>
              <tr>
                <th>Syntaxe</th>
                <th>Exemples</th>
              </tr>
            </thead>
            <tbody>
              <tr fragment>
                <td><code>/ab*/</code></td>
                <td>a, ab, abb, abbb...</td>
              </tr>
              <tr fragment>
                <td><code>/ab+/</code></td>
                <td><span style="margin: 0 1em" />ab, abb, abbb...</td>
              </tr>
              <tr fragment>
                <td><code>/ab?/</code></td>
                <td>a, ab</td>
              </tr>
            </tbody>
          </table>
          <aside>
            Il est possible de spécifier qu'un caractère peut être répété plusieurs fois.
            Le caractère "étoile" `*` indique que le caractère le précède peut apparaitre entre 0 et une infinité de
            fois.
            Le caractère "plus" `+` indique que le caractère qui le précède peut être répété infiniment.
            Enfin, le caractère "point d'interrogation" `?` indique que le caractère qui le précède est optionnel ;
            il peut être présent ou absent.
          </aside>
        </section>
        <section>
          <h2>Quantificateurs</h2>
          <h4>Exemples d'applications</h4>
          <ul>
            <li fragment>
              "http:" et "https:"
              <code fragment>/https?:/</code>
            </li>
            <li fragment>
              "regex" et "regexp"
              <code fragment>/regexp?/</code>
            </li>
            <li fragment>
              "wow" et "wowwww"
              <code fragment>/wow+/</code>
            </li>
            <li fragment>
              "être prêt", "être bientôt prêt"
              <ul fragment>
                <li><code>/être (bientôt )?prêt/</code></li>
              </ul>
            </li>
            <li fragment>
              "être content" et "être très content" et "être très très content"
              <ul fragment>
                <li><code>/être (très )*content/</code></li>
              </ul>
            </li>
          </ul>
        </section>
        <section>
          <h2>Quantificateurs</h2>
          <h4>Question de la répétition de groupe complexe</h4>
          <table>
            <thead>
              <th><code>(ab+, )*</code></th>
              <th style="text-align: right;" data-fragment-index="1">A &nbsp;</th>
              <th style="text-align: right;" data-fragment-index="2">B &nbsp;</th>
            </thead>
            <tbody>
              <tr>
                <td>
                  <ol data-fragment-index="0">
                    <li>ab, ab, ab, </li>
                    <li>abb, abb, abb, </li>
                    <li>abbb, abbb, abbb, </li>
                    <li>ab, abbbb, </li>
                    <li>abb, ab, </li>
                    <li>abbbbbb, abb,</li>
                  </ol>
                </td>
                <td>
                  <ul data-fragment-index="1" no-list-style>
                    <li>✅</li>
                    <li>✅</li>
                    <li>✅</li>
                    <li>❌</li>
                    <li>❌</li>
                    <li>❌</li>
                  </ul>
                </td>
                <td>
                  <ul data-fragment-index="2" no-list-style>
                    <li>✅</li>
                    <li>✅</li>
                    <li>✅</li>
                    <li>✅</li>
                    <li>✅</li>
                    <li>✅</li>
                  </ul>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>
      <section>
        <h2 classes>Classes de caractères</h2>
        <ol fragment>
          <li>Le point: <code>.</code></li>
          <li>Les énumérations complètes: <code>[abcdef]</code></li>
          <li>Les plages: <code>[a-f]</code></li>
          <li>Les classes négatives: <code>[^g-z]</code></li>
        </ol>
      </section>
      <section>
        <h2><copy- from="[classes]" /></h2>
        <h4>Matcher n'import quel caractère: le point</h4>
        <code>/./</code>
        <p fragment><code>/.*/</code></p>
        <p fragment><code>/(.|\n)*/</code></p>
      </section>
      <section>
        <h2><copy- from="[classes]" /></h2>
        <h4>Matcher un caractère au choix :<br>les énumérations complètes</h4>
        <code>/[abcdef]/</code>
        <div fragment><code>/(a|b|c|d|e|f)/</code></div>
        <h4 fragment>Exemples</h4>
        <ul>
          <li fragment>
            grand-mère et grand-père
            <code fragment>/grand-[mp]ère/</code>
          </li>
          <li fragment>
            boucher, coucher, doucher, loucher, moucher, toucher
            <code fragment>/[bcdlmt]oucher/</code>
          </li>
        </ul>
      </section>
      <section>
        <h2><copy- from="[classes]" /></h2>
        <h4>Plages de caractères</h4>
        <p><em fragment>(Plages ASCII)</em></p>
        <ul>
          <li fragment>
            les majuscules
            <code fragment>/[A-Z]/</code>
          </li>
          <li fragment>
            les lettres minuscules
            <code fragment>/[a-z]/</code>
          </li>
          <li fragment>
            les chiffres
            <code fragment>/[0-9]/</code>
          </li>
          <li fragment>
            les lettres
            <code fragment>/[A-Za-z]/</code>
          </li>
          <li fragment>
            les chiffres hexadécimaux
            <code fragment>/0x[0-9A-Fa-f]+/</code>
          </li>
          <li fragment>
            les identifieurs
            <code fragment>/[A-Za-z_][A-Za-z_0-9]*/</code>
          </li>
        </ul>
      </section>
      <section>
        <h2><copy- from="[classes]" /></h2>
        <h4>Les classes négatives</h4>
        <p><em fragment>(Les compléments de classe de caractères)</em></p>
        <div><code fragment>/[^x]/</code></div>
        <ul>
          <li fragment><code>/[^"]/</code><span fragment> → <code>/"[^"]*"/</code></span></li>
          <li fragment><code>/[^"0-9]/</code><span fragment> → <code>/"[^"0-9]*"/</code></span></li>
        </ul>
      </section>
      <section>
        <h2 qs>Quantificateurs spécifiques</h2>
        <em>Répétitions de motifs</em>
        <table>
          <thead>
            <tr>
              <th>Syntaxe</th>
              <th>Exemples</th>
            </tr>
          </thead>
          <tbody>
            <tr fragment>
              <td><code>/ab{4}/</code></td>
              <td fragment>abbbb</td>
            </tr>
            <tr fragment>
              <td><code>/ab{2,4}/</code></td>
              <td fragment>abb, abbb, abbbb</td>
            </tr>
            <tr fragment>
              <td><code>/ab{2,}/</code></td>
              <td fragment>abb, abbb, abbbb, abbbbb...</td>
            </tr>
          </tbody>
        </table>
      </section>
      <section>
        <h2><copy- from="[qs]" /></h2>
        <em>Répétitions de motifs</em>
        <table>
          <thead>
            <tr>
              <th>Syntaxe</th>
              <th>Description</th>
              <th>Équivalent</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td data-fragment-index="1"><code>/x*/</code></td>
              <td data-fragment-index="2" class="fs-2">"Autant de fois que possible"</td>
              <td fragment><code>/x{0,}/</code></td>
            </tr>
            <tr>
              <td data-fragment-index="1"><code>/x+/</code></td>
              <td data-fragment-index="2" class="fs-2">"Au moins une fois"</td>
              <td fragment><code>/x{1,}/</code></td>
            </tr>
            <tr>
              <td data-fragment-index="1"><code>/x?/</code></td>
              <td data-fragment-index="2" class="fs-2">"Zero ou une fois"</td>
              <td fragment><code>/x{0,1}/</code></td>
            </tr>
          </tbody>
        </table>
      </section>
      <section>
        <h2>Ancres</h2>
        <em>Assertions de longeur nulle</em>
        <table>
          <tbody>
            <tr>
              <td>
                <ol>
                  <li data-fragment-index="1">Le carret: <code>/^/</code></li>
                  <li data-fragment-index="2">Le dollard: <code>/$/</code></li>
                </ol>
              </td>
              <td>
                <ul no-list-style>
                  <li data-fragment-index="3"> → Début de ligne</li>
                  <li data-fragment-index="4"> → Fin de ligne</li>
                </ul>
              </td>
            </tr>
          </tbody>
        </table>
      </section>
      <section>
        <h2>Échapements</h2>
        <table>
          <tbody>
            <tr class="fs-2">
              <td>
                <ol>
                  <li data-fragment-index="1">Assertion de longeur nulle</li>
                  <li data-fragment-index="2">Caractères rares</li>
                  <li data-fragment-index="3">Classes de caractères Perl</li>
                  <li data-fragment-index="4">Ponctuations</li>
                  <li data-fragment-index="5">Contexte des classes de caractères</li>
                </ol>
              </td>
              <td>
                <ul no-list-style>
                  <li data-fragment-index="6">→ <code>\b, \B, ...</code></li>
                  <li data-fragment-index="7">→ <code>\n, \t, \r, ...</code></li>
                  <li data-fragment-index="8">→ <code>\d, \w, \s, ...</code></li>
                  <li data-fragment-index="9">→ <code>\+, \$, \\, ...</code></li>
                  <li data-fragment-index="10">→ <code>[\x], [^\x]</code></li>
                </ul>
              </td>
            </tr>
          </tbody>
        </table>
      </section>
      <section>
        <h2>Échapements</h2>
        <h4>Assertion de longeur nulle</h4>
        <ul>
          <li fragment>
            L'anti-slash "b": <code>/\b/</code>
            <ul><li fragment>Début ou fin d'un mot ASCII</li></ul>
          </li>
        </ul>
      </section>
      <section>
        <h2>Échapements</h2>
        <h4>Caractères rares</h4>
        <table>
          <thead>
            <tr>
              <th>Syntaxe</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>/\n/</code></td>
              <td class="fs-2">Retour à la ligne (LF: Line Feed)</td>
            </tr>
            <tr>
              <td><code>/\t/</code></td>
              <td class="fs-2">Tabulation</td>
            </tr>
            <tr>
              <td><code>/\r/</code></td>
              <td class="fs-2">Retour chariot (CR: Carriage Return)</td>
            </tr>
            <tr>
              <td><code>/\r\n/</code></td>
              <td class="fs-2">"CRLF": Carriage Return Line Feed</td>
            </tr>
          </tbody>
        </table>
      </section>
      <section>
        <h2>Échapements</h2>
        <h4>Classe de caractères Perl</h4>
        <table>
          <thead>
            <tr>
              <th>Syntaxe</th>
              <th>Description</th>
              <th>Équivalent</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td data-fragment-index="1"><code>/\d/</code></td>
              <td fragment class="fs-2">"Chiffre"</td>
              <td fragment><code>/[0-9]/</code></td>
            </tr>
            <tr>
              <td data-fragment-index="1"><code>/\w/</code></td>
              <td fragment class="fs-2">"Caractère de mot"</td>
              <td fragment><code>/[0-9A-Za-z_]/</code></td>
            </tr>
            <tr>
              <td data-fragment-index="1"><code>/\s/</code></td>
              <td fragment class="fs-2">"Caractère d'espacement"</td>
              <td fragment><code>/[\t\n\f\r ]/</code></td>
            </tr>
            <tr>
              <td data-fragment-index="1"><code>/\S/</code></td>
              <td fragment class="fs-2">"Non-caractère d'espacement"</td>
              <td fragment><code>/[^\t\n\f\r ]/</code></td>
            </tr>
          </tbody>
        </table>
      </section>
      <section>
        <h2>Échapements</h2>
        <h4>Ponctuations (31)</h4>
        <em>Dans le context générale</em>
        <ul>
          <li fragment>
            Ponctuations neutres (17):
            <ul>
              <li><code>`~!@#%&-=_;:'",&lt;></code></li>
            </ul>
          </li>
          <li fragment>
            Ponctuations à échapper (14):
            <ul>
              <li><code>$^*()+[]{}.?/\</code></li>
              <li fragment><code>\$\^\*\(\)\+\[\]\{\}\.\?\/\\</code></li>
            </ul>
          </li>
        </ul>
      </section>
      <section>
        <h2>Échapements</h2>
        <h4>Ponctuations</h4>
        <em>Dans le context d'une classe de caractères <code>[x]</code></em>
        <ul>
          <li fragment>
            Ponctuations à échapper: <span fragment><code>[]-/\</code></span>
        </ul>
      </section>

      <section>
        <h1>Aide mémoire</h1>
      </section>

      <section
        data-background-iframe="re2.syntax.short.cheatsheet.styled.html"
      ></section>

      <section>
        <h1 remplacement>Remplacements</h1>
      </section>
      <section>
        <h2><copy- from="[remplacement]" /></h2>
        <ul class="fs-2 table-of-contents" data-unfold-content="Remplacements"></ul>
      </section>

      <section>
        <h1>Cas habituels</h1>
      </section>

      <section>
        <h1>Exercices</h1>
      </section>

      <section>
        <h1>Les Regex hors de l'IDE</h1>
      </section>
      <section>
        <h2><copy- from="[outOfIde]" /></h2>
        <ul class="fs-2 table-of-contents" data-unfold-content="Les Regex hors de l'IDE"></ul>
      </section>

      <section>
        <h1 culture>Culture, théorie et moteurs de regexs</h1>
      </section>

      <section>
        <h2><copy- from="[culture]" /></h2>
        <ul class="fs-2 table-of-contents" data-unfold-content="Culture, théorie et moteurs de regexs"></ul>
      </section>

      <section>
        <h1>Autres ressources</h1>
      </section>
    </div>
  </div>

  <style>
    ul[no-list-style] {
      list-style: none;
    }

    [padding] {
      padding-top: 50px;
    }

    img[alt="regex-example"] {
      -webkit-filter: invert(1);
      filter: invert(1);
    }

    .red m-,
    div m-.red {
      color: red;
    }

    .green m-,
    div m-.green {
      color: green;
    }

    .blue m-,
    div m-.blue {
      color: #0066ff;
    }

    .decoration-left-rotated {
      transform: translate(-300px, 0) rotate(35deg);
    }

    .decoration-right-rotated {
      transform: translate(300px, 0) rotate(-25deg);
    }
  </style>

  <script>
    if (!location.search.includes("print-pdf")) {
      document.querySelectorAll("[fragment], [data-fragment-index]").forEach((element) => {
        element.classList.add("fragment")
      })
    }
    document.querySelectorAll("aside").forEach((element) => {
      element.classList.add("notes")
    })
  </script>
  <script src="node_modules/reveal.js-menu/menu.js"></script>
  <script src="revealTOC.js"></script>
  <script src="reveal.ts" type="module"></script>
  <script>
    document.querySelectorAll("copy-").forEach((copy) => {
      copy.innerHTML = document.querySelector(
        copy.getAttribute("from")
      ).innerHTML;
    });
  </script>
</body>

</html>